{
    "apiVersion": "v1",
    "kind": "ReplicationController",
    "metadata": {
	"labels": {
	    "name": "heapster"
	},
	"name": "monitoring-heapster-controller"
    },
    "spec": {
	"replicas": 1,
	"selector": {
	    "name": "heapster"
	},
	"template": {
	    "metadata": {
		"labels": {
		    "name": "heapster"
		}
	    },
	    "spec": {
		"containers": [
		    {
			"image": "kubernetes/heapster:v0.16.0",
			"name": "heapster",
			"command": [
			    "/heapster",
			    "--source=cadvisor:external?cadvisorPort=4194",
			    "--sink=influxdb:http://monitoring-influxdb:80"
			]
		    }
		],
		 "lifecycle": {
          "postStart": {
            "exec": {
              "command": [
                "/bin/sh ",
				"-c ",
				" cat << EOF > /var/run/heapster/hosts/hosts ",
				"{",
				"  \"Items\": [                       ",
				"{                               ",
				"  \"Name\": \"docker221\",          ",
				"  \"IP\": \"172.20.10.221\"         ",
				"},                              ",
				"{                               ",
				"  \"Name\": \"docker117\",          ",
				"  \"IP\": \"172.20.10.117\"         ",
				"},                              ",
				"{                               ",
				"  \"Name\": \"docker118\",          ",
				"  \"IP\": \"172.20.10.118\"         ",
				"},                              ",
				"{                               ",
				"  \"Name\": \"docker119\",          ",
				"  \"IP\": \"172.20.10.119\"         ",
				"}",
				"  ]                                ",
				" }                                 ",
				" EOF "
              ]
             }
	       }
		}
		}
    }
	}
}
